# å¾®æœåŠ¡ä¸ä»£ç ä¾èµ–ç›‘æ§æ‹“æ‰‘ç½‘

> åŸºäºå›¾è®ºç®—æ³•ä¸è‡ªå®šä¹‰æ•°æ®ç»“æ„çš„å¾®æœåŠ¡ä¾èµ–åˆ†æä¸å•†ä¸šå¤§å±ç³»ç»Ÿ

[![Node.js](https://img.shields.io/badge/Node.js-â‰¥18-339933?logo=node.js)](https://nodejs.org)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?logo=typescript)](https://www.typescriptlang.org)
[![React](https://img.shields.io/badge/React-19-61DAFB?logo=react)](https://react.dev)
[![SQLite](https://img.shields.io/badge/SQLite-å†…åµŒå¼-003B57?logo=sqlite)](https://sqlite.org)

---

## âœ¨ åŠŸèƒ½æ€»è§ˆ

| æ¨¡å— | åŠŸèƒ½æè¿° | æ ¸å¿ƒç®—æ³• |
|------|----------|----------|
| ğŸ“Š **æ‹“æ‰‘å¤§å±** | å…¨å±€å¾®æœåŠ¡ç½‘ç»œå›¾è°±å¯è§†åŒ–ï¼Œdagre å±‚çº§å¸ƒå±€ï¼Œæ–¹å‘ç­›é€‰ï¼ˆå…¨éƒ¨/ä¸Šæ¸¸/ä¸‹æ¸¸ï¼‰ | Dagre æœ‰å‘å›¾å¸ƒå±€ |
| ğŸ” **è°ƒç”¨é“¾è·¯è¿½è¸ª** | ä»»æ„ä¸¤æœåŠ¡é—´æœ€çŸ­è°ƒç”¨è·¯å¾„ï¼Œå±‚çº§åˆ†ç»„å¿«é€‰é¢æ¿ | **BFS å¹¿åº¦ä¼˜å…ˆæœç´¢** |
| ğŸ’¥ **çˆ†ç‚¸åŠå¾„è¯„ä¼°** | æ•…éšœä¼ æ’­èŒƒå›´åˆ†æï¼Œä¸Šä¸‹æ¸¸ä¾èµ–ç®¡ç†ï¼Œå¯æ‹–æ‹½å®½åº¦åŒé¢æ¿ | **BFS å¤šè·³ä¼ æ’­** |
| ğŸ—‚ï¸ **æœåŠ¡æ³¨å†Œè¡¨** | æœåŠ¡ CRUDã€å±‚çº§æ’åºã€ä¾èµ–å…³ç³»ç®¡ç† Modal | å“ˆå¸Œè¡¨ + é‚»æ¥è¡¨ |
| ğŸ¤ **æ™ºèƒ½æ¨è** | åŸºäº Jaccard ç›¸ä¼¼åº¦çš„ä¾èµ–å…³ç³»æ¨è | **Jaccard ç›¸ä¼¼åº¦ + FoF** |
| ğŸ” **å…¨åŸŸæœç´¢** | TopNav æ¨¡ç³Šæœç´¢ï¼Œè”æƒ³è¡¥å…¨ï¼Œç‚¹å‡»èšç„¦å›¾è°±èŠ‚ç‚¹ | çº¿æ€§éå†åŒ¹é… |

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

```
å‰ç«¯:  React 19 + TypeScript + TailwindCSS + AntV/G6 (å›¾å¯è§†åŒ–)
åç«¯:  Express + TypeScript + better-sqlite3 (å†…åµŒå¼ SQLite)
ç®—æ³•:  GraphEngine.ts â€” è‡ªå®ç°æœ‰å‘å›¾ + BFS / Jaccard / çˆ†ç‚¸åŠå¾„
è¿è¡Œ:  tsx (TS å³æ—¶è¿è¡Œ) + Vite (å‰ç«¯ HMR å¼€å‘æœåŠ¡)
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ algorithm/
â”‚   â”‚   â””â”€â”€ GraphEngine.ts     # æ ¸å¿ƒå›¾å¼•æ“ï¼ˆæœ‰å‘å›¾ + BFS + Jaccard + CRUDï¼‰
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ init.ts            # SQLite åˆå§‹åŒ– & 42 èŠ‚ç‚¹ç§å­æ•°æ®
â”‚   â””â”€â”€ server.ts              # Express REST API (ç«¯å£ 8000)
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ NetworkGraph.tsx   # G6 å›¾è°±ï¼ˆdagre / æ–¹å‘åˆ‡æ¢ / é«˜äº®ï¼‰
â”‚       â”‚   â”œâ”€â”€ Sidebar.tsx        # å¯æ‹–æ‹½å®½åº¦ä¾§è¾¹æ 
â”‚       â”‚   â””â”€â”€ TopNav.tsx         # å…¨åŸŸæœç´¢å¯¼èˆª
â”‚       â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ Dashboard.tsx      # æ‹“æ‰‘å¤§å± + ç»Ÿè®¡å¡
â”‚       â”‚   â”œâ”€â”€ PathFinder.tsx     # è°ƒç”¨é“¾è·¯è¿½è¸ª + ä¸‹æ»‘å¿«é€‰é¢æ¿
â”‚       â”‚   â”œâ”€â”€ RelationExplorer.tsx  # çˆ†ç‚¸åŠå¾„è¯„ä¼° + åŒä¾§å¯æ‹–æ‹½é¢æ¿
â”‚       â”‚   â””â”€â”€ UserManagement.tsx    # æœåŠ¡æ³¨å†Œè¡¨ + ä¾èµ–ç®¡ç† Modal
â”‚       â””â”€â”€ App.tsx                # è·¯ç”±å…¥å£ + Sidebar å®½åº¦çŠ¶æ€ç®¡ç†
â”œâ”€â”€ src/                       # Python åŸç‰ˆç®—æ³•ï¼ˆå‚è€ƒå®ç°ï¼‰
â”‚   â”œâ”€â”€ algorithm/             # BFS / æ¨èç®—æ³•
â”‚   â”œâ”€â”€ data_structure/        # è‡ªå®šä¹‰å›¾ / å“ˆå¸Œè¡¨ / æœ€å°å †
â”‚   â””â”€â”€ main.py                # CLI äº¤äº’å…¥å£
â”œâ”€â”€ data/                      # æµ‹è¯•æ•°æ®é›†
â”‚   â””â”€â”€ friend_sample.txt      # 42 æœåŠ¡èŠ‚ç‚¹ + è¾¹æ ·æœ¬
â””â”€â”€ Start-SNA.ps1              # ä¸€é”®å¯åŠ¨è„šæœ¬ (Windows PowerShell)
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å‰ç½®æ¡ä»¶

- **Node.js â‰¥ 18**
- **npm â‰¥ 8**

### å®‰è£…ä¾èµ–

```powershell
# åç«¯
cd backend
npm install

# å‰ç«¯
cd frontend
npm install
```

### åˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰

```powershell
cd backend
npx tsx db/init.ts
```

> ä¼šå†™å…¥ 42 ä¸ªå¾®æœåŠ¡èŠ‚ç‚¹åŠå…¶ä¾èµ–å…³ç³»åˆ° `socialflow.db`

### å¯åŠ¨æœåŠ¡

```powershell
# æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
.\Start-SNA.ps1

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
# ç»ˆç«¯ 1 â€” åç«¯ API (http://localhost:8000)
cd backend; npx tsx server.ts

# ç»ˆç«¯ 2 â€” å‰ç«¯å¼€å‘æœåŠ¡ (http://localhost:5173)
cd frontend; npm run dev
```

è®¿é—® `http://localhost:5173` è¿›å…¥ç³»ç»Ÿå¤§å±ã€‚

---

## ğŸ§  æ ¸å¿ƒç®—æ³•è¯´æ˜

### æœ‰å‘å›¾å†…å­˜ç»“æ„

```typescript
const graph: Map<string, ServiceNode> = new Map();   // èŠ‚ç‚¹ç´¢å¼• O(1)
const outAdj: Map<string, Set<string>> = new Map();  // å‡ºè¾¹ï¼ˆA è°ƒç”¨ Bï¼‰
const inAdj:  Map<string, Set<string>> = new Map();  // å…¥è¾¹ï¼ˆè°è°ƒç”¨ Aï¼‰
```

æ‰€æœ‰ä¿®æ”¹æ“ä½œåŒæ­¥ç»´æŠ¤ä¸‰ä¸ªç»“æ„ï¼Œç¡®ä¿ä»»æ„æ“ä½œå‡ä¸º O(1)ï¼ˆä¸å« BFSï¼‰ã€‚

### BFS æœ€çŸ­è·¯å¾„ï¼ˆè°ƒç”¨é“¾è¿½è¸ªï¼‰

```
æ²¿å‡ºè¾¹ï¼ˆè°ƒç”¨æ–¹å‘ï¼‰å¹¿åº¦ä¼˜å…ˆå±•å¼€ï¼Œè¿”å›æœ€çŸ­è·³æ•°ä¸å®Œæ•´è·¯å¾„åºåˆ—ã€‚
æ—¶é—´å¤æ‚åº¦ï¼šO(V + E)ï¼Œé˜Ÿåˆ—å®ç°ã€‚
```

### çˆ†ç‚¸åŠå¾„è¯„ä¼°ï¼ˆBFS åå‘ä¼ æ’­ï¼‰

```
æ²¿å…¥è¾¹ï¼ˆè¢«è°ƒç”¨æ–¹å‘ï¼‰é€†å‘ BFSï¼Œé€å±‚ç»Ÿè®¡å—å½±å“æœåŠ¡æ•°ã€‚
æ¯å¤šä¸€å±‚ä»£è¡¨æ•…éšœä¼ æ’­æ‰©æ•£ä¸€è·³ï¼Œæœ€ç»ˆæ±‡æ€»å½±å“èŒƒå›´ä¸å±‚çº§åˆ†å¸ƒã€‚
```

### æ™ºèƒ½æ¨èï¼ˆJaccard + FoF + æŠ€æœ¯æ ˆæƒé‡ï¼‰

```
å€™é€‰é›†ï¼šç›®æ ‡æœåŠ¡çš„äºŒåº¦ä¾èµ–ï¼ˆFriend-of-Friendï¼ŒO(DÂ²) éå†ï¼‰
è¯„åˆ† = Jaccard(å…±åŒä¸‹æ¸¸ / æ€»ä¸‹æ¸¸è”åˆ) Ã— 0.6
      + TechMatch(æŠ€æœ¯æ ˆé‡å ç‡)        Ã— 0.4
æœ€å°å †ç»´æŠ¤ Top-Kï¼Œæ—¶é—´å¤æ‚åº¦ O(DÂ² log K)
```

---

## ğŸ“¡ REST API é€ŸæŸ¥

### æœåŠ¡ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| `GET` | `/api/services?q=&page=&sortBy=&sortDir=` | æœåŠ¡æœç´¢ / åˆ†é¡µï¼ˆæ”¯æŒ `sortBy=tier/degree`ï¼‰ |
| `GET` | `/api/services/:uid` | å•æœåŠ¡è¯¦æƒ… |
| `POST` | `/api/services` | åˆ›å»ºæœåŠ¡èŠ‚ç‚¹ |
| `PUT` | `/api/services/:uid` | æ›´æ–°æœåŠ¡ä¿¡æ¯ |
| `DELETE` | `/api/services/:uid` | åˆ é™¤æœåŠ¡èŠ‚ç‚¹ï¼ˆçº§è”åˆ è¾¹ï¼‰ |

### ä¾èµ–å…³ç³»

| æ–¹æ³• | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| `GET` | `/api/services/:uid/dependencies` | ä¸Šä¸‹æ¸¸ç›´æ¥ä¾èµ– |
| `POST` | `/api/dependencies` | å»ºç«‹ä¾èµ–è¾¹ `{ source, target }` |
| `DELETE` | `/api/dependencies` | ç§»é™¤ä¾èµ–è¾¹ `{ source, target }` |

### åˆ†ææ¥å£

| æ–¹æ³• | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| `GET` | `/api/trace/:start/:end` | BFS è°ƒç”¨é“¾è·¯è¿½è¸ª |
| `GET` | `/api/services/:uid/recommend` | æ™ºèƒ½æ¨èï¼ˆTop-5ï¼‰ |
| `GET` | `/api/system/overview` | å…¨å±€ç»Ÿè®¡ï¼ˆèŠ‚ç‚¹æ•°/è¾¹æ•°/å¯†åº¦ï¼‰ |
| `GET` | `/api/network/graph` | å›¾è°±æ¸²æŸ“æ•°æ®ï¼ˆèŠ‚ç‚¹+è¾¹ï¼‰ |

---

## ğŸ¨ UI ç‰¹æ€§ï¼ˆfeat/ui-panels åˆ†æ”¯ï¼‰

- **å¯æ‹–æ‹½å®½åº¦é¢æ¿**ï¼šå·¦ä¾§ Sidebarï¼ˆ160~400 pxï¼‰ã€çˆ†ç‚¸åŠå¾„å³ä¾§å¿«é€‰æ ï¼ˆ120~480 pxï¼‰å‡å¯æ‹–æ‹½è°ƒæ•´
- **å›¾æ–¹å‘åˆ‡æ¢**ï¼šèŠ‚ç‚¹ç‚¹å‡»åå¯åœ¨ã€Œå…¨éƒ¨ / ä»…ä¸‹æ¸¸ / ä»…ä¸Šæ¸¸ã€ä¸‰ç§é«˜äº®æ¨¡å¼é—´åˆ‡æ¢
- **æœåŠ¡å¿«é€‰é¢æ¿**ï¼š
  - çˆ†ç‚¸åŠå¾„é¡µï¼šå³ä¾§çºµå‘æ»šåŠ¨æ ï¼ŒæŒ‰å±‚çº§æ’åºï¼Œç‚¹å‡»å³åˆ‡æ¢è¯„ä¼°å¯¹è±¡
  - è°ƒç”¨é“¾è·¯é¡µï¼šæœç´¢æ¡†ä¸‹æ–¹æŠ˜å å¼ä¸‹æ‹‰é¢æ¿ï¼Œç‚¹å‡» chip ä¾æ¬¡å¡«å…¥èµ·ç‚¹/ç»ˆç‚¹
- **è¡Œå†…æœç´¢å»ºç«‹ä¾èµ–**ï¼šçˆ†ç‚¸åŠå¾„è¯„ä¼°é¡µä¸‹æ¸¸/ä¸Šæ¸¸ä¸¤ä¸ªé¢æ¿å„æœ‰ç‹¬ç«‹æœç´¢æ¡†ï¼Œæœç´¢åä¸€é”®å»ºç«‹æˆ–åå‘å»ºç«‹è¾¹
- **å±‚çº§æ’åº**ï¼šæœåŠ¡æ³¨å†Œè¡¨æ”¯æŒæŒ‰ã€Œç½‘å…³å±‚ â†’ BFFå±‚ â†’ æ ¸å¿ƒé“¾è·¯ â†’ ä¸­é—´ä»¶ â†’ æ•°æ®å±‚ã€æ’åº
- **å®æ—¶å›¾åˆ·æ–°**ï¼šæ‰€æœ‰ä¾èµ–å…³ç³»å˜æ›´åè‡ªåŠ¨è§¦å‘ `SNA_REFRESH_GRAPH` äº‹ä»¶æ›´æ–°å›¾è°±

---

## ğŸŒ¿ åˆ†æ”¯è¯´æ˜

| åˆ†æ”¯ | è¯´æ˜ |
|------|------|
| `main` | ç¨³å®šåŸºç¡€ç‰ˆæœ¬ï¼ˆç”¨æˆ·ç¤¾äº¤ç½‘ç»œåœºæ™¯ï¼‰ |
| `advanced` | å¾®æœåŠ¡åˆ†æå¤§å±ç»“æ„ï¼ˆæ— æœ¬åˆ†æ”¯é™„åŠ ç‰¹æ€§ï¼‰ |
| `feat/*` | åŠŸèƒ½è¿­ä»£å­åˆ†æ”¯ï¼ˆå½“å‰ `feat/ui-panels`ï¼‰ |
| `backup-main` | main åˆ†æ”¯å¤‡ä»½ |

> Git ä¸å…è®¸åŒæ—¶å­˜åœ¨ `advanced` å’Œ `advanced/xxx` åˆ†æ”¯ï¼ˆref å‘½åç©ºé—´å†²çªï¼‰ï¼ŒåŠŸèƒ½å­åˆ†æ”¯ç»Ÿä¸€ä½¿ç”¨ `feat/` å‰ç¼€ã€‚

---

## ğŸ“„ è®¸å¯è¯

MIT License
